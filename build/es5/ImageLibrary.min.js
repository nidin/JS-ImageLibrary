var ctypes;!function(t){var i=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.low=t,this.high=i}return t.prototype.value=function(){var t=this.high.toString(16),i=8-t.length;if(i>0)for(var e=0;i>e;e++)t="0"+t;var n=this.low.toString(16),r=8-n.length;if(r>0)for(e=0;r>e;e++)n="0"+n;return this._value=Number("0x"+t+n),this._value},t}();t.UInt64=i}(ctypes||(ctypes={}));var ctypes;!function(t){var i=function(){function t(t,i){this.low=t,this.high=i}return t.prototype.value=function(){var t=this.high.toString(16),i=8-t.length;if(i>0)for(var e=0;i>e;e++)t="0"+t;var n=this.low.toString(16),r=8-n.length;if(r>0)for(e=0;r>e;e++)n="0"+n;return this._value=Number("0x"+t+n),this._value},t}();t.Int64=i}(ctypes||(ctypes={}));var nid;!function(t){var i;!function(t){var i=ctypes.UInt64,e=ctypes.Int64,n=function(){function t(i,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this.BUFFER_EXT_SIZE=1024,this.array=null,this.EOF_byte=-1,this.EOF_code_point=-1,void 0==i?(i=new ArrayBuffer(this.BUFFER_EXT_SIZE),this.write_position=0):this.write_position=null==i?0:n>0?n:i.byteLength,i&&(this.data=new DataView(i,e,n>0?n:i.byteLength)),this._position=0,this.endian=t.BIG_ENDIAN}return Object.defineProperty(t.prototype,"buffer",{get:function(){return this.data.buffer},set:function(t){this.data=new DataView(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this.data},set:function(t){this.data=t,this.write_position=t.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"phyPosition",{get:function(){return this._position+this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position<t&&!this.validate(this._position-t)||(this._position=t,this.write_position=t>this.write_position?t:this.write_position)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.write_position},set:function(t){this.validateBuffer(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._position=0},t.prototype.getArray=function(){return null==this.array&&(this.array=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength)),this.array},t.prototype.setArray=function(t){this.array=t,this.setBuffer(t.buffer,t.byteOffset,t.byteLength)},t.prototype.setBuffer=function(t,i,e){void 0===i&&(i=0),void 0===e&&(e=0),t?(this.data=new DataView(t,i,e>0?e:t.byteLength),this.write_position=e>0?e:t.byteLength):this.write_position=0,this._position=0},t.prototype.readBoolean=function(){return this.validate(t.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},t.prototype.readByte=function(){return this.validate(t.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},t.prototype.readBytes=function(i,e,n,r){if(void 0===i&&(i=null),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=!1),0==n)n=this.bytesAvailable;else if(!this.validate(n))return null;if(r){i=null==i?new t(new ArrayBuffer(n)):i;for(var o=0;n>o;o++)i.data.setUint8(o+e,this.data.getUint8(this.position++))}else i=null==i?new t(null):i,i.dataView=new DataView(this.data.buffer,this.bufferOffset+this.position,n),this.position+=n;return i},t.prototype.readDouble=function(){if(!this.validate(t.SIZE_OF_FLOAT64))return null;var i=this.data.getFloat64(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_FLOAT64,i},t.prototype.readFloat=function(){if(!this.validate(t.SIZE_OF_FLOAT32))return null;var i=this.data.getFloat32(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_FLOAT32,i},t.prototype.readInt=function(){if(!this.validate(t.SIZE_OF_INT32))return null;var i=this.data.getInt32(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_INT32,i},t.prototype.readInt64=function(){if(!this.validate(t.SIZE_OF_UINT32))return null;var i=this.data.getInt32(this.position,this.endian==t.LITTLE_ENDIAN);this.position+=t.SIZE_OF_INT32;var n=this.data.getInt32(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_INT32,new e(i,n)},t.prototype.readMultiByte=function(t,i){return this.validate(t)?"":null},t.prototype.readShort=function(){if(!this.validate(t.SIZE_OF_INT16))return null;var i=this.data.getInt16(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_INT16,i},t.prototype.readUnsignedByte=function(){return this.validate(t.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},t.prototype.readUnsignedInt=function(){if(!this.validate(t.SIZE_OF_UINT32))return null;var i=this.data.getUint32(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_UINT32,i},t.prototype.readVariableSizedUnsignedInt=function(){var t,i=this.readUnsignedByte();return 255!=i?(t=i<<8,i=this.readUnsignedByte(),t|=i):(i=this.readUnsignedByte(),t=i<<16,i=this.readUnsignedByte(),t|=i<<8,i=this.readUnsignedByte(),t|=i),t},t.prototype.readU16VX=function(){return this.readUnsignedByte()<<8|this.readUnsignedByte()},t.prototype.readUnsignedInt64=function(){if(!this.validate(t.SIZE_OF_UINT32))return null;var e=this.data.getUint32(this.position,this.endian==t.LITTLE_ENDIAN);this.position+=t.SIZE_OF_UINT32;var n=this.data.getUint32(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_UINT32,new i(e,n)},t.prototype.readUnsignedShort=function(){if(!this.validate(t.SIZE_OF_UINT16))return null;var i=this.data.getUint16(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_UINT16,i},t.prototype.readUTF=function(){if(!this.validate(t.SIZE_OF_UINT16))return null;var i=this.data.getUint16(this.position,this.endian==t.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_UINT16,i>0?this.readUTFBytes(i):""},t.prototype.readUTFBytes=function(t){if(!this.validate(t))return null;var i=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(i)},t.prototype.readStandardString=function(t){if(!this.validate(t))return null;for(var i="",e=0;t>e;e++)i+=String.fromCharCode(this.data.getUint8(this.position++));return i},t.prototype.readStringTillNull=function(t){void 0===t&&(t=!0);for(var i="",e=0;this.bytesAvailable>0;){var n=this.data.getUint8(this.position++);if(e++,0==n){t&&e%2!=0&&this.position++;break}i+=String.fromCharCode(n)}return i},t.prototype.writeBoolean=function(i){this.validateBuffer(t.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,i?1:0)},t.prototype.writeByte=function(i){this.validateBuffer(t.SIZE_OF_INT8),this.data.setInt8(this.position++,i)},t.prototype.writeUnsignedByte=function(i){this.validateBuffer(t.SIZE_OF_UINT8),this.data.setUint8(this.position++,i)},t.prototype.writeBytes=function(t,i,e){void 0===i&&(i=0),void 0===e&&(e=0),this.validateBuffer(e);for(var n=new DataView(t.buffer),r=0;r<t.length;r++)this.data.setUint8(this.position++,n.getUint8(r))},t.prototype.writeDouble=function(i){this.validateBuffer(t.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,i,this.endian==t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_FLOAT64},t.prototype.writeFloat=function(i){this.validateBuffer(t.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,i,this.endian==t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_FLOAT32},t.prototype.writeInt=function(i){this.validateBuffer(t.SIZE_OF_INT32),this.data.setInt32(this.position,i,this.endian==t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_INT32},t.prototype.writeMultiByte=function(t,i){},t.prototype.writeShort=function(i){this.validateBuffer(t.SIZE_OF_INT16),this.data.setInt16(this.position,i,this.endian==t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_INT16},t.prototype.writeUnsignedShort=function(i){this.validateBuffer(t.SIZE_OF_UINT16),this.data.setUint16(this.position,i,this.endian==t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT16},t.prototype.writeUnsignedInt=function(i){this.validateBuffer(t.SIZE_OF_UINT32),this.data.setUint32(this.position,i,this.endian==t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT32},t.prototype.writeUTF=function(i){var e=this.encodeUTF8(i),n=e.length;this.validateBuffer(t.SIZE_OF_UINT16+n),this.data.setUint16(this.position,n,this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT16,this.writeUint8Array(e)},t.prototype.writeUTFBytes=function(t){this.writeUint8Array(this.encodeUTF8(t))},t.prototype.toString=function(){return"[ByteArrayBase] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},t.prototype.writeUint8Array=function(t){this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},t.prototype.writeUint16Array=function(i){this.validateBuffer(this.position+i.length);for(var e=0;e<i.length;e++)this.data.setUint16(this.position,i[e],this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT16},t.prototype.writeUint32Array=function(i){this.validateBuffer(this.position+i.length);for(var e=0;e<i.length;e++)this.data.setUint32(this.position,i[e],this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT32},t.prototype.writeInt8Array=function(t){this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setInt8(this.position++,t[i])},t.prototype.writeInt16Array=function(i){this.validateBuffer(this.position+i.length);for(var e=0;e<i.length;e++)this.data.setInt16(this.position,i[e],this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_INT16},t.prototype.writeInt32Array=function(i){this.validateBuffer(this.position+i.length);for(var e=0;e<i.length;e++)this.data.setInt32(this.position,i[e],this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_INT32},t.prototype.writeFloat32Array=function(i){this.validateBuffer(this.position+i.length);for(var e=0;e<i.length;e++)this.data.setFloat32(this.position,i[e],this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_FLOAT32},t.prototype.writeFloat64Array=function(i){this.validateBuffer(this.position+i.length);for(var e=0;e<i.length;e++)this.data.setFloat64(this.position,i[e],this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_FLOAT64},t.prototype.readUint8Array=function(i,e){if(void 0===e&&(e=!0),!this.validate(i))return null;if(e){r=new Uint8Array(new ArrayBuffer(i));for(var n=0;i>n;n++)r[n]=this.data.getUint8(this.position),this.position+=t.SIZE_OF_UINT8}else{var r=new Uint8Array(this.buffer,this.bufferOffset+this.position,i);this.position+=i}return r},t.prototype.readUint16Array=function(i,e){void 0===e&&(e=!0);var n=i*t.SIZE_OF_UINT16;if(!this.validate(n))return null;if(e){o=new Uint16Array(new ArrayBuffer(n));for(var r=0;i>r;r++)o[r]=this.data.getUint16(this.position,this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT16}else{var o=new Uint16Array(this.buffer,this.bufferOffset+this.position,i);this.position+=n}return o},t.prototype.readUint32Array=function(i,e){void 0===e&&(e=!0);var n=i*t.SIZE_OF_UINT32;if(!this.validate(n))return null;if(e){o=new Uint32Array(new ArrayBuffer(n));for(var r=0;i>r;r++)o[r]=this.data.getUint32(this.position,this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT32}else{var o=new Uint32Array(this.buffer,this.bufferOffset+this.position,i);this.position+=n}return o},t.prototype.readInt8Array=function(i,e){if(void 0===e&&(e=!0),!this.validate(i))return null;if(e){r=new Int8Array(new ArrayBuffer(i));for(var n=0;i>n;n++)r[n]=this.data.getInt8(this.position),this.position+=t.SIZE_OF_INT8}else{var r=new Int8Array(this.buffer,this.bufferOffset+this.position,i);this.position+=i}return r},t.prototype.readInt16Array=function(i,e){void 0===e&&(e=!0);var n=i*t.SIZE_OF_INT16;if(!this.validate(n))return null;if(e){o=new Int16Array(new ArrayBuffer(n));for(var r=0;i>r;r++)o[r]=this.data.getInt16(this.position,this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_INT16}else{var o=new Int16Array(this.buffer,this.bufferOffset+this.position,i);this.position+=n}return o},t.prototype.readInt32Array=function(i,e){void 0===e&&(e=!0);var n=i*t.SIZE_OF_INT32;if(!this.validate(n))return null;if(e){o=new Int32Array(new ArrayBuffer(n));for(var r=0;i>r;r++)o[r]=this.data.getInt32(this.position,this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_INT32}else{var o=new Int32Array(this.buffer,this.bufferOffset+this.position,i);this.position+=n}return o},t.prototype.readFloat32Array=function(i,e){void 0===e&&(e=!0);var n=i*t.SIZE_OF_FLOAT32;if(!this.validate(n))return null;if(e){o=new Float32Array(new ArrayBuffer(n));for(var r=0;i>r;r++)o[r]=this.data.getFloat32(this.position,this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_FLOAT32}else if(this.position%4==0){var o=new Float32Array(this.buffer,this.position,i);this.position+=n}else{for(var s=new Uint8Array(new ArrayBuffer(n)),r=0;n>r;r++)s[r]=this.data.getUint8(this.position),this.position+=t.SIZE_OF_UINT8;o=new Float32Array(s.buffer)}return o},t.prototype.readFloat64Array=function(i,e){void 0===e&&(e=!0);var n=i*t.SIZE_OF_FLOAT64;if(!this.validate(n))return null;if(e){o=new Float64Array(new ArrayBuffer(n));for(var r=0;i>r;r++)o[r]=this.data.getFloat64(this.position,this.endian===t.LITTLE_ENDIAN),this.position+=t.SIZE_OF_FLOAT64}else{var o=new Float64Array(this.buffer,this.position,i);this.position+=n}return o},t.prototype.validate=function(t){if(this.data.byteLength>0&&this._position+t<=this.data.byteLength)return!0;throw"Error #2030: End of file was encountered."},t.prototype.validateBuffer=function(t){if(this.write_position=t>this.write_position?t:this.write_position,this.data.byteLength<t){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE));i.set(new Uint8Array(this.data.buffer)),this.data.buffer=i.buffer}},t.prototype.encodeUTF8=function(t){for(var i=0,e=this.stringToCodePoints(t),n=[];e.length>i;){var r=e[i++];if(this.inRange(r,55296,57343))this.encoderError(r);else if(this.inRange(r,0,127))n.push(r);else{var o,s;for(this.inRange(r,128,2047)?(o=1,s=192):this.inRange(r,2048,65535)?(o=2,s=224):this.inRange(r,65536,1114111)&&(o=3,s=240),n.push(this.div(r,Math.pow(64,o))+s);o>0;){var a=this.div(r,Math.pow(64,o-1));n.push(128+a%64),o-=1}}}return new Uint8Array(n)},t.prototype.decodeUTF8=function(t){for(var i,e=!1,n=0,r="",o=0,s=0,a=0,h=0;t.length>n;){var d=t[n++];if(d===this.EOF_byte)i=0!==s?this.decoderError(e):this.EOF_code_point;else if(0===s)this.inRange(d,0,127)?i=d:(this.inRange(d,194,223)?(s=1,h=128,o=d-192):this.inRange(d,224,239)?(s=2,h=2048,o=d-224):this.inRange(d,240,244)?(s=3,h=65536,o=d-240):this.decoderError(e),o*=Math.pow(64,s),i=null);else if(this.inRange(d,128,191))if(a+=1,o+=(d-128)*Math.pow(64,s-a),a!==s)i=null;else{var u=o,c=h;o=0,s=0,a=0,h=0,i=this.inRange(u,c,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(e,d)}else o=0,s=0,a=0,h=0,n--,i=this.decoderError(e,d);null!==i&&i!==this.EOF_code_point&&(65535>=i?i>0&&(r+=String.fromCharCode(i)):(i-=65536,r+=String.fromCharCode(55296+(i>>10&1023)),r+=String.fromCharCode(56320+(1023&i))))}return r},t.prototype.encoderError=function(t){throw"EncodingError! The code point "+t+" could not be encoded."},t.prototype.decoderError=function(t,i){if(t)throw"DecodingError";return i||65533},t.prototype.inRange=function(t,i,e){return t>=i&&e>=t},t.prototype.div=function(t,i){return Math.floor(t/i)},t.prototype.stringToCodePoints=function(t){for(var i=[],e=0,n=t.length;e<t.length;){var r=t.charCodeAt(e);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))i.push(65533);else if(e===n-1)i.push(65533);else{var o=t.charCodeAt(e+1);if(this.inRange(o,56320,57343)){var s=1023&r,a=1023&o;e+=1,i.push(65536+(s<<10)+a)}else i.push(65533)}else i.push(r);e+=1}return i},t.BIG_ENDIAN="bigEndian",t.LITTLE_ENDIAN="littleEndian",t.SIZE_OF_BOOLEAN=1,t.SIZE_OF_INT8=1,t.SIZE_OF_INT16=2,t.SIZE_OF_INT32=4,t.SIZE_OF_INT64=8,t.SIZE_OF_UINT8=1,t.SIZE_OF_UINT16=2,t.SIZE_OF_UINT32=4,t.SIZE_OF_UINT64=8,t.SIZE_OF_FLOAT32=4,t.SIZE_OF_FLOAT64=8,t}();t.ByteArrayBase=n}(i=t.utils||(t.utils={}))}(nid||(nid={}));var nid;!function(t){var i;!function(t){var i=function(){function t(){}return t.allocateUint8=function(i){t.u8=new Uint8Array(i)},t.allocateUint16=function(i){t.u16=new Uint16Array(i)},t.allocateUint32=function(i){t.u32=new Uint32Array(i)},t.getUint8=function(){return t.u8||t.allocateUint8(10),t.u8Index++},t.getUint16=function(){return t.u16||t.allocateUint16(24),t.u16Index++},t.getUint32=function(){return t.u32||t.allocateUint32(10),t.u32Index++},t.u8Index=0,t.u16Index=0,t.u32Index=0,t}();t.MEMORY=i}(i=t.utils||(t.utils={}))}(nid||(nid={}));var nid;!function(t){var i;!function(i){var e=t.utils.MEMORY,n=function(){function t(){this.posSlotDecoder=i.BitTreeDecoder.constructArray(6,i.LZMA.kNumLenToPosStates),this.alignDecoder=new i.BitTreeDecoder(i.LZMA.kNumAlignBits),this.posDecoders=new Uint16Array(1+i.LZMA.kNumFullDistances-i.LZMA.kEndPosModelIndex),this.isMatch=new Uint16Array(i.LZMA.kNumStates<<i.LZMA.kNumPosBitsMax),this.isRep=new Uint16Array(i.LZMA.kNumStates),this.isRepG0=new Uint16Array(i.LZMA.kNumStates),this.isRepG1=new Uint16Array(i.LZMA.kNumStates),this.isRepG2=new Uint16Array(i.LZMA.kNumStates),this.isRep0Long=new Uint16Array(i.LZMA.kNumStates<<i.LZMA.kNumPosBitsMax),this.lenDecoder=new i.LenDecoder,this.repLenDecoder=new i.LenDecoder,this.rangeDec=new i.RangeDecoder,this.outWindow=new i.OutWindow}return t.prototype.init=function(){this.loc1=0|e.getUint32(),this.loc2=0|e.getUint32(),this.matchBitI=0|e.getUint16(),this.matchByteI=0|e.getUint16(),this.bitI=0|e.getUint16(),this.symbolI=0|e.getUint16(),this.prevByteI=0|e.getUint16(),this.litStateI=0|e.getUint16(),this.initLiterals(),this.initDist(),i.LZMA.INIT_PROBS(this.isMatch),i.LZMA.INIT_PROBS(this.isRep),i.LZMA.INIT_PROBS(this.isRepG0),i.LZMA.INIT_PROBS(this.isRepG1),i.LZMA.INIT_PROBS(this.isRepG2),i.LZMA.INIT_PROBS(this.isRep0Long),this.lenDecoder.init(),this.repLenDecoder.init()},t.prototype.create=function(){this.outWindow.create(this.dictSize),this.createLiterals()},t.prototype.createLiterals=function(){this.litProbs=new Uint16Array(768<<this.lc+this.lp)},t.prototype.initLiterals=function(){for(var t=768<<this.lc+this.lp,e=0;t>e;e++)this.litProbs[e]=i.LZMA.PROB_INIT_VAL},t.prototype.decodeLiteral=function(t,i){e.u16[this.prevByteI]=0,this.outWindow.isEmpty()||(e.u16[this.prevByteI]=this.outWindow.getByte(1)),e.u16[this.symbolI]=1,e.u16[this.litStateI]=((this.outWindow.totalPos&(1<<this.lp)-1)<<this.lc)+(e.u16[this.prevByteI]>>>8-this.lc);var n=768*e.u16[this.litStateI]|0;if(t>=7){e.u16[this.matchByteI]=this.outWindow.getByte(i+1);do if(e.u16[this.matchBitI]=e.u16[this.matchByteI]>>>7&1,e.u16[this.matchByteI]<<=1,e.u16[this.bitI]=this.rangeDec.decodeBit(this.litProbs,n+(1+e.u16[this.matchBitI]<<8)+e.u16[this.symbolI]),e.u16[this.symbolI]=e.u16[this.symbolI]<<1|e.u16[this.bitI],e.u16[this.matchBitI]!=e.u16[this.bitI])break;while(e.u16[this.symbolI]<256)}for(;e.u16[this.symbolI]<256;)e.u16[this.symbolI]=e.u16[this.symbolI]<<1|this.rangeDec.decodeBit(this.litProbs,n+e.u16[this.symbolI]);this.outWindow.putByte(e.u16[this.symbolI]-256)},t.prototype.decodeDistance=function(t){var n=t;n>i.LZMA.kNumLenToPosStates-1&&(n=i.LZMA.kNumLenToPosStates-1);var r=this.posSlotDecoder[n].decode(this.rangeDec);if(4>r)return r;var o=(r>>>1)-1;return e.u32[this.loc1]=(2|1&r)<<o,r<i.LZMA.kEndPosModelIndex?e.u32[this.loc1]+=i.LZMA.BitTreeReverseDecode(this.posDecoders,o,this.rangeDec,e.u32[this.loc1]-r):(e.u32[this.loc1]+=this.rangeDec.decodeDirectBits(o-i.LZMA.kNumAlignBits)<<i.LZMA.kNumAlignBits,e.u32[this.loc1]+=this.alignDecoder.reverseDecode(this.rangeDec)),e.u32[this.loc1]},t.prototype.initDist=function(){for(var t=0;t<i.LZMA.kNumLenToPosStates;t++)this.posSlotDecoder[t].init();this.alignDecoder.init(),i.LZMA.INIT_PROBS(this.posDecoders)},t.prototype.decodeProperties=function(t){var e=new Uint8Array(4);if(e[0]=t[0],e[0]>=225)throw"Incorrect LZMA properties";e[1]=e[0]%9,e[0]/=9,e[2]=e[0]/5,e[3]=e[0]%5,this.lc=e[1],this.pb=e[2],this.lp=e[3],this.dictSizeInProperties=0;for(var n=0;4>n;n++)this.dictSizeInProperties|=t[n+1]<<8*n;this.dictSize=this.dictSizeInProperties,this.dictSize<i.LZMA.LZMA_DIC_MIN&&(this.dictSize=i.LZMA.LZMA_DIC_MIN)},t.prototype.updateState_Literal=function(t){return 4>t?0:10>t?t-3:t-6},t.prototype.updateState_ShortRep=function(t){return 7>t?9:11},t.prototype.updateState_Rep=function(t){return 7>t?8:11},t.prototype.updateState_Match=function(t){return 7>t?7:10},t.prototype.decode=function(t,e){this.init(),this.rangeDec.init(),t&&(this.outWindow.outStream=new Uint8Array(new ArrayBuffer(e)));for(var n=0,r=0,o=0,s=0,a=0;;){if(t&&0==e&&!this.markerIsMandatory&&this.rangeDec.isFinishedOK())return i.LZMA.LZMA_RES_FINISHED_WITHOUT_MARKER;var h=this.outWindow.totalPos&(1<<this.pb)-1;if(0!=this.rangeDec.decodeBit(this.isMatch,(a<<i.LZMA.kNumPosBitsMax)+h)){var d;if(0!=this.rangeDec.decodeBit(this.isRep,a)){if(t&&0==e)return i.LZMA.LZMA_RES_ERROR;if(this.outWindow.isEmpty())return i.LZMA.LZMA_RES_ERROR;if(0==this.rangeDec.decodeBit(this.isRepG0,a)){if(0==this.rangeDec.decodeBit(this.isRep0Long,(a<<i.LZMA.kNumPosBitsMax)+h)){a=this.updateState_ShortRep(a),this.outWindow.putByte(this.outWindow.getByte(n+1)),e--;continue}}else{var u;0==this.rangeDec.decodeBit(this.isRepG1,a)?u=r:(0==this.rangeDec.decodeBit(this.isRepG2,a)?u=o:(u=s,s=o),o=r),r=n,n=u}d=this.repLenDecoder.decode(this.rangeDec,h),a=this.updateState_Rep(a)}else{if(s=o,o=r,r=n,d=this.lenDecoder.decode(this.rangeDec,h),a=this.updateState_Match(a),n=this.decodeDistance(d),4294967295==n)return this.rangeDec.isFinishedOK()?i.LZMA.LZMA_RES_FINISHED_WITH_MARKER:i.LZMA.LZMA_RES_ERROR;if(t&&0==e)return i.LZMA.LZMA_RES_ERROR;if(n>=this.dictSize||!this.outWindow.checkDistance(n))return i.LZMA.LZMA_RES_ERROR}d+=i.LZMA.kMatchMinLen;var c=!1;if(t&&d>e&&(d=e,c=!0),this.outWindow.copyMatch(n+1,d),e-=d,c)return i.LZMA.LZMA_RES_ERROR}else{if(t&&0==e)return i.LZMA.LZMA_RES_ERROR;this.decodeLiteral(a,n),a=this.updateState_Literal(a),e--}}},t}();i.LzmaDecoder=n}(i=t.utils||(t.utils={}))}(nid||(nid={}));var nid;!function(t){var i;!function(t){var i=function(){function t(){this.out_pos=0}return t.prototype.create=function(t){this.buf=new Uint8Array(t),this.pos=0,this.size=t,this.isFull=!1,this.totalPos=0},t.prototype.putByte=function(t){this.totalPos++,this.buf[this.pos++]=t,this.pos==this.size&&(this.pos=0,this.isFull=!0),this.outStream[this.out_pos++]=t},t.prototype.getByte=function(t){return this.buf[t<=this.pos?this.pos-t:this.size-t+this.pos]},t.prototype.copyMatch=function(t,i){for(;i>0;i--)this.putByte(this.getByte(t))},t.prototype.checkDistance=function(t){return t<=this.pos||this.isFull},t.prototype.isEmpty=function(){return 0==this.pos&&!this.isFull},t}();t.OutWindow=i}(i=t.utils||(t.utils={}))}(nid||(nid={}));var nid;!function(t){var i;!function(t){var i=function(){function t(){this.rangeI=0,this.codeI=1,this.loc1=2,this.loc2=3,this.in_pos=13}return t.prototype.isFinishedOK=function(){return 0==this.U32[this.codeI]},t.prototype.init=function(){this.U32=new Uint32Array(4),this.U16=new Uint16Array(4),this.corrupted=!1,0!=this.inStream[this.in_pos++]&&(this.corrupted=!0),this.U32[this.rangeI]=4294967295,this.U32[this.codeI]=0;for(var t=0;4>t;t++)this.U32[this.codeI]=this.U32[this.codeI]<<8|this.inStream[this.in_pos++];this.U32[this.codeI]==this.U32[this.rangeI]&&(this.corrupted=!0)},t.prototype.normalize=function(){this.U32[this.rangeI]<t.kTopValue&&(this.U32[this.rangeI]<<=8,this.U32[this.codeI]=this.U32[this.codeI]<<8|this.inStream[this.in_pos++])},t.prototype.decodeDirectBits=function(t){this.U32[this.loc1]=0;do this.U32[this.rangeI]>>>=1,this.U32[this.codeI]-=this.U32[this.rangeI],this.U32[this.loc2]=0-(this.U32[this.codeI]>>>31),this.U32[this.codeI]+=this.U32[this.rangeI]&this.U32[this.loc2],this.U32[this.codeI]==this.U32[this.rangeI]&&(this.corrupted=!0),this.normalize(),this.U32[this.loc1]<<=1,this.U32[this.loc1]+=this.U32[this.loc2]+1;while(--t);return this.U32[this.loc1]},t.prototype.decodeBit=function(t,i){return this.U16[0]=t[i],this.U32[2]=(this.U32[0]>>>11)*this.U16[0],this.U32[1]<this.U32[2]?(this.U16[0]+=2048-this.U16[0]>>>5,this.U32[0]=this.U32[2],this.U16[1]=0):(this.U16[0]-=this.U16[0]>>>5,this.U32[1]-=this.U32[2],this.U32[0]-=this.U32[2],this.U16[1]=1),t[i]=this.U16[0],this.U32[0]<16777216&&(this.U32[0]<<=8,this.U32[1]=this.U32[1]<<8|this.inStream[this.in_pos++]),this.U16[1]},t.kTopValue=1<<24,t}();t.RangeDecoder=i}(i=t.utils||(t.utils={}))}(nid||(nid={}));var nid;!function(t){var i;!function(t){var i=function(){function i(t){this.numBits=t,this.probs=new Uint16Array(1<<this.numBits)}return i.prototype.init=function(){t.LZMA.INIT_PROBS(this.probs)},i.prototype.decode=function(t){for(var i=1,e=0;e<this.numBits;e++)i=(i<<1)+t.decodeBit(this.probs,i);return i-(1<<this.numBits)},i.prototype.reverseDecode=function(i){return t.LZMA.BitTreeReverseDecode(this.probs,this.numBits,i)},i.constructArray=function(t,e){for(var n=[],r=0;e>r;r++)n[r]=new i(t);return n},i}();t.BitTreeDecoder=i}(i=t.utils||(t.utils={}))}(nid||(nid={}));var nid;!function(t){var i;!function(t){var i=function(){function i(){this.lowCoder=t.BitTreeDecoder.constructArray(3,1<<t.LZMA.kNumPosBitsMax),this.midCoder=t.BitTreeDecoder.constructArray(3,1<<t.LZMA.kNumPosBitsMax),this.highCoder=new t.BitTreeDecoder(8)}return i.prototype.init=function(){this.choice=[t.LZMA.PROB_INIT_VAL,t.LZMA.PROB_INIT_VAL],this.highCoder.init();for(var i=0;i<1<<t.LZMA.kNumPosBitsMax;i++)this.lowCoder[i].init(),this.midCoder[i].init()},i.prototype.decode=function(t,i){return 0==t.decodeBit(this.choice,0)?this.lowCoder[i].decode(t):0==t.decodeBit(this.choice,1)?8+this.midCoder[i].decode(t):16+this.highCoder.decode(t)},i}();t.LenDecoder=i}(i=t.utils||(t.utils={}))}(nid||(nid={}));var nid;!function(t){var i;!function(t){"use strict";var i=function(){function i(){this.decoder=new t.LzmaDecoder}return i.INIT_PROBS=function(t){for(var i=0;i<t.length;i++)t[i]=this.PROB_INIT_VAL},i.BitTreeReverseDecode=function(t,i,e,n){void 0===n&&(n=0);for(var r=1,o=0,s=0;i>s;s++){var a=e.decodeBit(t,n+r);r<<=1,r+=a,o|=a<<s}return o},i.prototype.decode=function(t){this.data=t;var e,n=new Uint8Array(13);for(e=0;13>e;e++)n[e]=t[e];this.decoder.decodeProperties(n),console.log("\nlc="+this.decoder.lc+", lp="+this.decoder.lp+", pb="+this.decoder.pb),console.log("\nDictionary Size in properties = "+this.decoder.dictSizeInProperties),console.log("\nDictionary Size for decoding  = "+this.decoder.dictSize);var r=0,o=!1;for(e=0;8>e;e++){var s=n[5+e];255!=s&&(o=!0),r|=s<<8*e}this.decoder.markerIsMandatory=!o,console.log("\n"),console.log(o?"Uncompressed Size : "+r+" bytes":"End marker is expected\n"),this.decoder.rangeDec.inStream=t,console.log("\n"),this.decoder.create();var a=this.decoder.decode(o,r);if(console.log("Read    ",this.decoder.rangeDec.in_pos),console.log("Written ",this.decoder.outWindow.out_pos),a==i.LZMA_RES_ERROR)throw"LZMA decoding error";if(a==i.LZMA_RES_FINISHED_WITHOUT_MARKER)console.log("Finished without end marker");else{if(a!=i.LZMA_RES_FINISHED_WITH_MARKER)throw"Internal Error";if(o){if(this.decoder.outWindow.out_pos!=r)throw"Finished with end marker before than specified size";console.log("Warning: ")}console.log("Finished with end marker")}return console.log("\n"),this.decoder.rangeDec.corrupted&&console.log("\nWarning: LZMA stream is corrupted\n"),this.decoder.outWindow.outStream},i.LZMA_DIC_MIN=4096,i.LZMA_RES_ERROR=0,i.LZMA_RES_FINISHED_WITH_MARKER=1,i.LZMA_RES_FINISHED_WITHOUT_MARKER=2,i.kNumBitModelTotalBits=11,i.kNumMoveBits=5,i.PROB_INIT_VAL=(1<<i.kNumBitModelTotalBits)/2,i.kNumPosBitsMax=4,i.kNumStates=12,i.kNumLenToPosStates=4,i.kNumAlignBits=4,i.kStartPosModelIndex=4,i.kEndPosModelIndex=14,i.kNumFullDistances=1<<(i.kEndPosModelIndex>>>1),i.kMatchMinLen=2,i}();t.LZMA=i}(i=t.utils||(t.utils={}))}(nid||(nid={}));var nid;!function(t){var i;!function(t){var i=function(){function i(){}return i.init=function(){var t=0;i.enableAsync&&(i.decoderAsync=new Worker("LZMAWorker.min.js"),i.decoderAsync.onmessage=function(e){0==t?t=e.data:t==i.ENCODE?t=0:t==i.DECODE&&(t=0,i.callback(e.data),i.callback=null)})},i.encode=function(t){return null},i.decodeBuffer=function(t){return i.decoder.decode(new Uint8Array(t)).buffer},i.decode=function(t){return i.decoder.decode(t)},i.encodeAsync=function(t,e){i.enableAsync||console.log("Error! Asynchronous encoding is disabled")},i.decodeAsync=function(t,e){i.enableAsync?null==i.callback?(i.callback=e,i.decoderAsync.postMessage(i.DECODE),i.decoderAsync.postMessage(t,[t])):console.log("Warning! Another LZMA decoding is running..."):console.log("Error! Asynchronous decoding is disabled")},i.decoder=new t.LZMA,i.enableAsync=!1,i.ENCODE=1,i.DECODE=2,i}();t.LZMAHelper=i}(i=t.utils||(t.utils={}))}(nid||(nid={})),nid.utils.LZMAHelper.init();var nid;!function(t){var i;!function(t){var i=function(){function t(){}return t.DEFLATE="deflate",t.LZMA="lzma",t.ZLIB="zlib",t}();t.CompressionAlgorithm=i}(i=t.utils||(t.utils={}))}(nid||(nid={}));var __extends=this.__extends||function(t,i){function e(){this.constructor=t}for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);e.prototype=i.prototype,t.prototype=new e},nid;!function(t){var i;!function(t){var i=function(i){function e(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),i.call(this,t,e,n)}return __extends(e,i),e.prototype.compress=function(i){throw void 0===i&&(i=t.CompressionAlgorithm.LZMA),"Compression error! "+i+" not implemented"},e.prototype.decompressBuffer=function(i){if(void 0===i&&(i=t.CompressionAlgorithm.LZMA),i==t.CompressionAlgorithm.LZMA)try{this.buffer=t.LZMAHelper.decodeBuffer(this.buffer)}catch(e){throw"Uncompression error! "+i+" not implemented"}else if(i!=t.CompressionAlgorithm.ZLIB)throw"Uncompression error! "+i+" not implemented"},e.prototype.decompress=function(i){if(void 0===i&&(i=t.CompressionAlgorithm.LZMA),i==t.CompressionAlgorithm.LZMA)try{this.array=t.LZMAHelper.decode(this.array)}catch(e){throw"Uncompression error! "+i+" not implemented"}else if(i!=t.CompressionAlgorithm.ZLIB)throw"Uncompression error! "+i+" not implemented"},e.prototype.compressAsync=function(t,i){throw"Compression error! "+t+" not implemented"},e.prototype.decompressAsync=function(i,e){if(void 0===i&&(i=t.CompressionAlgorithm.LZMA),void 0===e&&(e=null),i!=t.CompressionAlgorithm.LZMA)throw"Uncompression error! "+i+" not implemented";t.LZMAHelper.decodeAsync(this.buffer,function(t){this.buffer=t})},e.prototype.deflate=function(){},e.prototype.inflate=function(){},e.prototype.readBytesAsByteArray=function(t,i,n,r){if(void 0===t&&(t=null),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=!1),0==n)n=this.bytesAvailable;else if(!this.validate(n))return null;if(r){t=null==t?new e(new ArrayBuffer(n)):t;for(var o=0;n>o;o++)t.data.setUint8(o+i,this.data.getUint8(this.position++))}else t=null==t?new e(null):t,t.dataView=new DataView(this.data.buffer,this.bufferOffset+this.position,n),this.position+=n;return t},e.prototype.readObject=function(){return null},e.prototype.writeObject=function(t){},e.BIG_ENDIAN="bigEndian",e.LITTLE_ENDIAN="littleEndian",e}(t.ByteArrayBase);t.ByteArray=i}(i=t.utils||(t.utils={}))}(nid||(nid={})),this.log=function(t,i){void 0===i&&(i=!1),logHistory+=t+"\n",(debugMode||i)&&console.log(t)},this.info=function(t){logHistory+=t+"\n",debugMode&&console.log(t)},this.warn=function(t){logHistory+=t+"\n",logWaring&&console.warn("warning:",t)},this.error=function(t){logHistory+=t+"\n",logError&&console.error("error:",t)},this.saveLog=function(){var t=new Blob([logHistory],{type:"application/octet-binary"}),i=URL.createObjectURL(t),e=document.createElementNS("http://www.w3.org/1999/xhtml","a");e.href=i;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,null,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)},debugMode=!1,logError=!0,logWaring=!0,logHistory="";var nid;!function(t){function i(t,i){void 0===i&&(i="Unnamed");var e=new Blob([t],{type:"application/octet-binary"
}),n=URL.createObjectURL(e),r=document.createElementNS("http://www.w3.org/1999/xhtml","a");r.href=n,r.download=i;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,null,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(o)}t.saveAs=i}(nid||(nid={}));var nid;!function(t){var i;!function(t){var i=function(){function t(t){this.imageData=void 0==t?new ImageData:t}return Object.defineProperty(t.prototype,"transparent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.imageData.data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.imageData.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.imageData.width},enumerable:!0,configurable:!0}),t.prototype.getPixel=function(t,i){{var e=4*(t+i*this.width),n=this.imageData.data[e],r=this.imageData.data[e+1],o=this.imageData.data[e+2];this.imageData.data[e+3]}return n<<16|r<<8|o},t.prototype.getPixel32=function(t,i){var e=4*(t+i*this.width),n=this.imageData.data[e],r=this.imageData.data[e+1],o=this.imageData.data[e+2],s=this.imageData.data[e+3];return n<<24|r<<16|o<<8|s},t.prototype.setPixel32=function(t,i,e){var n=4*(t+i*this.width),r=e>>24,o=e>>16&255,s=e>>8&255,a=255&e;this.imageData.data[n]=r,this.imageData.data[n+1]=o,this.imageData.data[n+2]=s,this.imageData.data[n+3]=a},t}();t.BitmapData=i}(i=t.display||(t.display={}))}(nid||(nid={}));var nid;!function(t){var i;!function(i){var e=t.utils.ByteArray,n=function(){function t(t){void 0===t&&(t=50),this.DENSITY_UNIT=1,this.xDENSITY=1,this.yDENSITY=1,this.std_dc_luminance_nrcodes=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],this.std_dc_luminance_values=[0,1,2,3,4,5,6,7,8,9,10,11],this.std_dc_chrominance_nrcodes=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],this.std_dc_chrominance_values=[0,1,2,3,4,5,6,7,8,9,10,11],this.std_ac_luminance_nrcodes=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],this.std_ac_luminance_values=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],this.std_ac_chrominance_nrcodes=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],this.std_ac_chrominance_values=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250],this.ZigZag=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],this.category=new Array(65535),this.bitcode=new Array(65535),this.YTable=new Array(64),this.UVTable=new Array(64),this.fdtbl_Y=new Array(64),this.fdtbl_UV=new Array(64),this.bytenew=0,this.bytepos=7,this.DU=new Array(64),this.YDU=new Array(64),this.UDU=new Array(64),this.VDU=new Array(64),0>=t&&(t=1),t>100&&(t=100);var i=0;i=50>t?5e3/t:200-2*t,this.initHuffmanTbl(),this.initCategoryNumber(),this.initQuantTables(i)}return Object.defineProperty(t.prototype,"contentType",{get:function(){return t.CONTENT_TYPE},enumerable:!0,configurable:!0}),t.prototype.encode=function(t,i){return void 0===i&&(i=0),this.internalEncode(t,t.width,t.height,!0,i)},t.prototype.encodeByteArray=function(t,i,e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=0),this.internalEncode(t,i,e,n,r)},t.prototype.initHuffmanTbl=function(){this.YDC_HT=this.computeHuffmanTbl(this.std_dc_luminance_nrcodes,this.std_dc_luminance_values),this.UVDC_HT=this.computeHuffmanTbl(this.std_dc_chrominance_nrcodes,this.std_dc_chrominance_values),this.YAC_HT=this.computeHuffmanTbl(this.std_ac_luminance_nrcodes,this.std_ac_luminance_values),this.UVAC_HT=this.computeHuffmanTbl(this.std_ac_chrominance_nrcodes,this.std_ac_chrominance_values)},t.prototype.computeHuffmanTbl=function(t,i){for(var e=0,n=0,r=[],o=1;16>=o;o++){for(var s=1;s<=t[o];s++)r[i[n]]=new BitString,r[i[n]].val=e,r[i[n]].len=o,n++,e++;e*=2}return r},t.prototype.initCategoryNumber=function(){for(var t,i=1,e=2,n=1;15>=n;n++){for(t=i;e>t;t++)this.category[32767+t]=n,this.bitcode[32767+t]=new BitString,this.bitcode[32767+t].len=n,this.bitcode[32767+t].val=t;for(t=-(e-1);-i>=t;t++)this.category[32767+t]=n,this.bitcode[32767+t]=new BitString,this.bitcode[32767+t].len=n,this.bitcode[32767+t].val=e-1+t;i<<=1,e<<=1}},t.prototype.initQuantTables=function(t){var i,e=0,n=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(e=0;64>e;e++)i=Math.floor((n[e]*t+50)/100),1>i?i=1:i>255&&(i=255),this.YTable[this.ZigZag[e]]=i;var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(e=0;64>e;e++)i=Math.floor((r[e]*t+50)/100),1>i?i=1:i>255&&(i=255),this.UVTable[this.ZigZag[e]]=i;var o=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379];e=0;for(var s=0;8>s;s++)for(var a=0;8>a;a++)this.fdtbl_Y[e]=1/(this.YTable[this.ZigZag[e]]*o[s]*o[a]*8),this.fdtbl_UV[e]=1/(this.UVTable[this.ZigZag[e]]*o[s]*o[a]*8),e++},t.prototype.internalEncode=function(t,i,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=0);var s=t,a=t;this.byteout=new e(new ArrayBuffer(i*n*4)),this.bytenew=0,this.bytepos=7,this.xDENSITY=o,this.yDENSITY=o,this.writeWord(65496),this.writeAPP0(o),this.writeDQT(),this.writeSOF0(i,n),this.writeDHT(),this.writeSOS();var h=0,d=0,u=0;this.bytenew=0,this.bytepos=7;for(var c=0;n>c;c+=8)for(var f=0;i>f;f+=8)this.RGB2YUV(s,a,f,c,i,n),h=this.processDU(this.YDU,this.fdtbl_Y,h,this.YDC_HT,this.YAC_HT),d=this.processDU(this.UDU,this.fdtbl_UV,d,this.UVDC_HT,this.UVAC_HT),u=this.processDU(this.VDU,this.fdtbl_UV,u,this.UVDC_HT,this.UVAC_HT);if(this.bytepos>=0){var p=new BitString;p.len=this.bytepos+1,p.val=(1<<this.bytepos+1)-1,this.writeBits(p)}return this.writeWord(65497),this.byteout},t.prototype.RGB2YUV=function(t,i,e,n,r,o){for(var s=0,a=0;8>a;a++){var h=n+a;h>=o&&(h=o-1);for(var d=0;8>d;d++){var u=e+d;u>=r&&(u=r-1);var c;t?c=t.getPixel32(u,h):(i.position=4*(h*r+u),c=i.readUnsignedInt());var f=Number(c>>16&255),p=Number(c>>8&255),l=Number(255&c);this.YDU[s]=.299*f+.587*p+.114*l-128,this.UDU[s]=-.16874*f-.33126*p+.5*l,this.VDU[s]=.5*f-.41869*p-.08131*l,s++}}},t.prototype.processDU=function(t,i,e,n,r){var o,s=r[0],a=r[240],h=this.fDCTQuant(t,i);for(o=0;64>o;o++)this.DU[this.ZigZag[o]]=h[o];var d=this.DU[0]-e;e=this.DU[0],0==d?this.writeBits(n[0]):(this.writeBits(n[this.category[32767+d]]),this.writeBits(this.bitcode[32767+d]));for(var u=63;u>0&&0==this.DU[u];u--);if(0==u)return this.writeBits(s),e;for(o=1;u>=o;){for(var c=o;0==this.DU[o]&&u>=o;o++);var f=o-c;if(f>=16){for(var p=1;f/16>=p;p++)this.writeBits(a);f=15&f}this.writeBits(r[16*f+this.category[32767+this.DU[o]]]),this.writeBits(this.bitcode[32767+this.DU[o]]),o++}return 63!=u&&this.writeBits(s),e},t.prototype.fDCTQuant=function(t,i){var e,n=0;for(e=0;8>e;e++){var r=t[n+0]+t[n+7],o=t[n+0]-t[n+7],s=t[n+1]+t[n+6],a=t[n+1]-t[n+6],h=t[n+2]+t[n+5],d=t[n+2]-t[n+5],u=t[n+3]+t[n+4],c=t[n+3]-t[n+4],f=r+u,p=r-u,l=s+h,y=s-h;t[n+0]=f+l,t[n+4]=f-l;var _=.707106781*(y+p);t[n+2]=p+_,t[n+6]=p-_,f=c+d,l=d+a,y=a+o;var I=.382683433*(f-y),w=.5411961*f+I,g=1.306562965*y+I,v=.707106781*l,A=o+v,E=o-v;t[n+5]=E+w,t[n+3]=E-w,t[n+1]=A+g,t[n+7]=A-g,n+=8}for(n=0,e=0;8>e;e++)r=t[n+0]+t[n+56],o=t[n+0]-t[n+56],s=t[n+8]+t[n+48],a=t[n+8]-t[n+48],h=t[n+16]+t[n+40],d=t[n+16]-t[n+40],u=t[n+24]+t[n+32],c=t[n+24]-t[n+32],f=r+u,p=r-u,l=s+h,y=s-h,t[n+0]=f+l,t[n+32]=f-l,_=.707106781*(y+p),t[n+16]=p+_,t[n+48]=p-_,f=c+d,l=d+a,y=a+o,I=.382683433*(f-y),w=.5411961*f+I,g=1.306562965*y+I,v=.707106781*l,A=o+v,E=o-v,t[n+40]=E+w,t[n+24]=E-w,t[n+8]=A+g,t[n+56]=A-g,n++;for(e=0;64>e;e++)t[e]=Math.round(t[e]*i[e]);return t},t.prototype.writeBits=function(t){for(var i=t.val,e=t.len-1;e>=0;)i&1<<e&&(this.bytenew|=1<<this.bytepos),e--,this.bytepos--,this.bytepos<0&&(255==this.bytenew?(this.writeByte(255),this.writeByte(0)):this.writeByte(this.bytenew),this.bytepos=7,this.bytenew=0)},t.prototype.writeByte=function(t){this.byteout.writeByte(t)},t.prototype.writeWord=function(t){this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.writeAPP0=function(t){this.writeWord(65504),this.writeWord(16),this.writeByte(74),this.writeByte(70),this.writeByte(73),this.writeByte(70),this.writeByte(0),this.writeByte(1),this.writeByte(1),this.writeByte(0==t?0:this.DENSITY_UNIT),this.writeWord(0==t?1:this.xDENSITY),this.writeWord(0==t?1:this.yDENSITY),this.writeByte(0),this.writeByte(0)},t.prototype.writeDQT=function(){this.writeWord(65499),this.writeWord(132),this.writeByte(0);var t;for(t=0;64>t;t++)this.writeByte(this.YTable[t]);for(this.writeByte(1),t=0;64>t;t++)this.writeByte(this.UVTable[t])},t.prototype.writeSOF0=function(t,i){this.writeWord(65472),this.writeWord(17),this.writeByte(8),this.writeWord(i),this.writeWord(t),this.writeByte(3),this.writeByte(1),this.writeByte(17),this.writeByte(0),this.writeByte(2),this.writeByte(17),this.writeByte(1),this.writeByte(3),this.writeByte(17),this.writeByte(1)},t.prototype.writeDHT=function(){var t;for(this.writeWord(65476),this.writeWord(418),this.writeByte(0),t=0;16>t;t++)this.writeByte(this.std_dc_luminance_nrcodes[t+1]);for(t=0;11>=t;t++)this.writeByte(this.std_dc_luminance_values[t]);for(this.writeByte(16),t=0;16>t;t++)this.writeByte(this.std_ac_luminance_nrcodes[t+1]);for(t=0;161>=t;t++)this.writeByte(this.std_ac_luminance_values[t]);for(this.writeByte(1),t=0;16>t;t++)this.writeByte(this.std_dc_chrominance_nrcodes[t+1]);for(t=0;11>=t;t++)this.writeByte(this.std_dc_chrominance_values[t]);for(this.writeByte(17),t=0;16>t;t++)this.writeByte(this.std_ac_chrominance_nrcodes[t+1]);for(t=0;161>=t;t++)this.writeByte(this.std_ac_chrominance_values[t])},t.prototype.writeSOS=function(){this.writeWord(65498),this.writeWord(12),this.writeByte(3),this.writeByte(1),this.writeByte(0),this.writeByte(2),this.writeByte(17),this.writeByte(3),this.writeByte(17),this.writeByte(0),this.writeByte(63),this.writeByte(0)},t.CONTENT_TYPE="image/jpeg",t}();i.JPEGEncoder=n}(i=t.encoder||(t.encoder={}))}(nid||(nid={}));var BitString=function(){function t(){this.len=0,this.val=0}return t.prototype.BitString=function(){},t}(),nid;!function(t){var i;!function(i){var e=t.utils.ByteArray,n=function(){function t(){}return Object.defineProperty(t,"contentType",{get:function(){return t.CONTENT_TYPE},enumerable:!0,configurable:!0}),t.encode=function(t,i){return void 0===i&&(i=0),this.initializeCRCTable(),this.internalEncode(t,t.width,t.height,t.transparent,i)},t.encodeByteArray=function(t,i,e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=0),this.initializeCRCTable(),this.internalEncode(t,i,e,n,r)},t.initializeCRCTable=function(){if(null==this.crcTable){this.crcTable=[];for(var t=0;256>t;t++){for(var i=t,e=0;8>e;e++)1&i?i=3988292384^i>>>1:i>>>=1;this.crcTable[t]=i}}},t.internalEncode=function(t,i,n,r,o){var s=t,a=t;a&&(a.position=0);var h=new e(new ArrayBuffer(i*n*4));h.writeUnsignedInt(2303741511),h.writeUnsignedInt(218765834);var d=new e(new ArrayBuffer(13));if(d.writeInt(i),d.writeInt(n),d.writeByte(8),d.writeByte(6),d.writeByte(0),d.writeByte(0),d.writeByte(0),this.writeChunk(h,1229472850,d),o>0){var u=new e(new ArrayBuffer(9));o/=.0254,u.writeUnsignedInt(o),u.writeUnsignedInt(o),u.writeByte(1),this.writeChunk(h,1883789683,u)}for(var c=new e,f=0;n>f;f++){c.writeByte(0);var p,l;if(r)for(p=0;i>p;p++)l=s?s.getPixel32(p,f):a.readUnsignedInt(),c.writeUnsignedInt((16777215&l)<<8|l>>>24);else for(p=0;i>p;p++)l=s?s.getPixel(p,f):a.readUnsignedInt(),c.writeUnsignedInt((16777215&l)<<8|255)}return c.compress(),this.writeChunk(h,1229209940,c),this.writeChunk(h,1229278788,null),h.position=0,h},t.writeChunk=function(t,i,e){var n=0;e&&(n=e.length),t.writeUnsignedInt(n);var r=t.position;t.writeUnsignedInt(i),e&&t.writeBytes(e);var o=t.position;t.position=r;for(var s=4294967295,a=r;o>a;a++)s=this.crcTable[255&(s^t.readUnsignedByte())]^s>>>8;s=4294967295^s,t.position=o,t.writeUnsignedInt(s)},t.CONTENT_TYPE="image/png",t}();i.PNGEncoder=n}(i=t.encoder||(t.encoder={}))}(nid||(nid={}));var nid;!function(t){var i=t.utils.ByteArray,e=t.display.BitmapData,n=t.encoder.JPEGEncoder,r=t.encoder.PNGEncoder,o=function(){function t(){}return t.encodePNG=function(t,n){if(void 0===n&&(n=null),t instanceof ImageData)return r.encode(new e(t),72);if(t instanceof e)return r.encode(t,72);if(!(t instanceof i))throw"[encodePNG] Error! unsupported data";return null},t.encodeJPEG=function(t,n){if(void 0===n&&(n=null),t instanceof ImageData)return this.jpegEncoder.encode(new e(t),72);if(t instanceof e)return this.jpegEncoder.encode(t,72);if(!(t instanceof i))throw"[encodeJPEG] Error! unsupported data";return null},t.jpegEncoder=new n,t}();t.ImageLibrary=o}(nid||(nid={}));